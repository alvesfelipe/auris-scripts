#!/bin/bash
# Script made to install all Auris Controller and folders for Music_for_deaf project.

echo "Creating MUSIC_DEAF folder"
mkdir -p MUSIC_DEAF
echo "##################################################"

echo "Creating MUSIC_DEAF subfolders"
cd MUSIC_DEAF/
mkdir -p music_for_deaf/{auris-core/,auris-drivers/}
mkdir -p music_for_deaf_files/{audios/,auris_melodies/,midis/,audios_filtered/}
echo "##################################################"

echo "Cloning repositories from GIT-LAB"
cd music_for_deaf/
git clone git@gitlab.lavid.ufpb.br:auris/auris-controller.git || git pull origin master
git clone git@gitlab.lavid.ufpb.br:auris/auris-scripts.git || git pull origin master
git clone git@gitlab.lavid.ufpb.br:auris/auris-server.git || git pull origin master
cd auris-server/
git clone git@gitlab.lavid.ufpb.br:auris/front.git || git pull origin master
echo "##################################################"
cd ..
cd auris-core/
git clone git@gitlab.lavid.ufpb.br:auris/midi-melody-generator.git || git pull origin master
git clone git@gitlab.lavid.ufpb.br:auris/auris-stream.git || git pull origin master
git clone git@gitlab.lavid.ufpb.br:auris/auris-filter.git || git pull origin master
echo "##################################################"
cd ..
cd auris-drivers/
git clone git@gitlab.lavid.ufpb.br:auris/auris-bracelet.git || git pull origin master
echo "##################################################"

echo "Installing all dependencies"
cd ..
cd auris-scripts/
sudo chmod 755 dependencies_Setup
./dependencies_Setup

echo "Installing essentia"
cd ..
cd auris-scripts
sudo chmod 755 instalacao_essentia_final.sh
./instalacao_essentia_final.sh
cd ..
cd auris-core/auris-filter/Auris_Essentia/
make
